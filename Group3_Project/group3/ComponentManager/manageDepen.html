<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="/group3/Login/lang.js"></script>
	<script src="/group3/Login/theme.js" defer></script>

	<link rel="stylesheet" href="/group3/style.css">

    <title>Dependeny Manager</title>
</head>
<body>
    <?php
        $servidor = 'localhost';
        $user = 'root';
        $dbname = 'srsWeb';

        $ligacao = mysqli_connect($servidor, $user) or die("Sem ligaÃ§Ã£o");
        mysqli_select_db($ligacao, $dbname) or die("Sem DB");

        function UserPermissions($ligacao, $userID, $permID) {
            $checkPerms = "SELECT PermissionID FROM srsDevPerm WHERE DevID = '$userID' AND PermissionID = '$permID'";
            $perms = mysqli_query($ligacao, $checkPerms);
            
            if($perms -> num_rows > 0){
                return true;
            }else{
                return false;
            }
        }
    ?>

    <div class="form">
        <h1>Manage Dependencies</h1>
        <?php include 'listComp.php';?>

        <br/><br/>

        <?php if (UserPermissions($ligacao, $userID, 3)): ?>
            <input type="submit" value="Define dependency" onClick="window.location.href='defineDepen.html'"></br>
        <?php endif; ?>

        <?php if (UserPermissions($ligacao, $userID, 4)): ?>
            <input type="submit" value="Change dependency" onClick="window.location.href='changeDepen.html'"></br>
        <?php endif; ?>

        <?php if (UserPermissions($ligacao, $userID, 5)): ?>
            <input type="submit" value="Cancel dependency" onClick="window.location.href='cancelDepen.html'"></br>
        <?php endif; ?>

        <br/>
        <br/>
        <input type="button" value="Back to menu" onclick="window.location.href='/group3/devUser.html';">
    </div>
</body>
</html>